-- Load Rayfield
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Window
local Window = Rayfield:CreateWindow({
    Name = "HM Hub",
    LoadingTitle = "HM Hub",
    LoadingSubtitle = "by Tha Hollows",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "HMhub",
        FileName = "Config"
    },
    KeySystem = false,
})

-- Main Tab
local MainTab = Window:CreateTab("Main", 4483362458)

-- Variables
local autoClick = false
local autoStat = false
local selectedStat = "Energy"
local dailyReward = false
local autoRankup = false
local autoQuest = false
local selectedQuestPart = "Nomek_Main_Part_1"
local autoTitle = false

-- Title list
local titleList = {
    "Adept", "Apprentice", "Amateur", "Trainee", "Novice",
    "Recruit", "Challanger", "Combatant", "Competitor", "Fighter",
    "Commander", "Warrior", "Elite Warrior", "Master"
}

-- Auto Clicker
MainTab:CreateToggle({
    Name = "Auto Clicker",
    CurrentValue = false,
    Flag = "AutoClickToggle",
    Callback = function(Value)
        autoClick = Value
        if Value then
            Rayfield:Notify({Title = "Auto Clicker", Content = "Started (~0.1s delay)", Duration = 3})
            task.spawn(function()
                while autoClick do
                    pcall(function()
                        game:GetService("ReplicatedStorage").Packages._Index["sleitnick_knit@1.5.1"].knit.Services.ClickService.RF.Click:InvokeServer()
                    end)
                    task.wait(0.1)
                end
            end)
        end
    end,
})

-- Stat Dropdown & Toggle
MainTab:CreateDropdown({
    Name = "Select Stat to Upgrade",
    Options = {"Energy", "Gems", "Luck", "Damage"},
    CurrentOption = {"Energy"},
    Flag = "SelectedStatFlag",
    Callback = function(Option)
        selectedStat = Option[1]
        Rayfield:Notify({Title = "Stat", Content = "Selected: " .. selectedStat, Duration = 3})
    end,
})

MainTab:CreateToggle({
    Name = "Auto Upgrade Selected Stat",
    CurrentValue = false,
    Flag = "AutoStatToggle",
    Callback = function(Value)
        autoStat = Value
        if Value then
            if not selectedStat then
                Rayfield:Notify({Title = "Error", Content = "Select a stat first", Duration = 4})
                autoStat = false
                return
            end
            Rayfield:Notify({Title = "Auto Stats", Content = "Upgrading " .. selectedStat, Duration = 4})
            task.spawn(function()
                local remote = game:GetService("ReplicatedStorage").Packages._Index["sleitnick_knit@1.5.1"].knit.Services.LevelService.RF.PutStat
                while autoStat do
                    pcall(function() remote:InvokeServer(selectedStat, 1) end)
                    task.wait(30)
                end
            end)
        end
    end,
})

-- Daily Rewards
MainTab:CreateToggle({
    Name = "Auto Claim Dailies (1-9)",
    CurrentValue = false,
    Flag = "DailyRewardToggle",
    Callback = function(Value)
        dailyReward = Value
        if Value then
            Rayfield:Notify({Title = "Dailies", Content = "Claiming 1–9 every 60s", Duration = 4})
            task.spawn(function()
                local remote = game:GetService("ReplicatedStorage").Packages._Index["sleitnick_knit@1.5.1"].knit.Services.GiftService.RF.ClaimReward
                local ids = {1,2,3,4,5,6,7,8,9}
                while dailyReward do
                    pcall(function()
                        for _, id in ipairs(ids) do
                            remote:InvokeServer(id)
                            task.wait(0.2)
                        end
                    end)
                    task.wait(60)
                end
            end)
        end
    end,
})

-- Auto Rank Up
MainTab:CreateToggle({
    Name = "Auto Rank Up",
    CurrentValue = false,
    Flag = "AutoRankUpToggle",
    Callback = function(Value)
        autoRankup = Value
        if Value then
            Rayfield:Notify({Title = "Rank Up", Content = "Attempting every 60s", Duration = 4})
            task.spawn(function()
                local remote = game:GetService("ReplicatedStorage").Packages._Index["sleitnick_knit@1.5.1"].knit.Services.RankupService.RF.RankUp
                while autoRankup do
                    pcall(function() remote:InvokeServer() end)
                    task.wait(60)
                end
            end)
        end
    end,
})

-- Quest Dropdown & Toggle
MainTab:CreateDropdown({
    Name = "Select Quest Part",
    Options = {"Nomek_Main_Part_1","Nomek_Main_Part_2","Nomek_Main_Part_3","Nomek_Main_Part_4","Nomek_Main_Part_5","Nomek_Main_Part_6","Nomek_Main_Part_7"},
    CurrentOption = {"Nomek_Main_Part_1"},
    Flag = "QuestPartFlag",
    Callback = function(Option)
        selectedQuestPart = Option[1]
        Rayfield:Notify({Title = "Quest", Content = "Selected: " .. selectedQuestPart, Duration = 3})
    end,
})

MainTab:CreateToggle({
    Name = "Auto Accept & Complete Quest",
    CurrentValue = false,
    Flag = "AutoQuestToggle",
    Callback = function(Value)
        autoQuest = Value
        if Value then
            if not selectedQuestPart then
                Rayfield:Notify({Title = "Error", Content = "Select quest first", Duration = 4})
                autoQuest = false
                return
            end
            Rayfield:Notify({Title = "Quest", Content = "Auto on: " .. selectedQuestPart, Duration = 4})
            task.spawn(function()
                local rf = game:GetService("ReplicatedStorage").Packages._Index["sleitnick_knit@1.5.1"].knit.Services.QuestService.RF
                local accept = rf.AcceptQuest
                local complete = rf.CompleteQuest
                while autoQuest do
                    pcall(function()
                        accept:InvokeServer(selectedQuestPart)
                        complete:InvokeServer(selectedQuestPart)
                    end)
                    task.wait(60)
                end
            end)
        end
    end,
})

-- Auto Titles
MainTab:CreateToggle({
    Name = "Auto Buy Titles",
    CurrentValue = false,
    Flag = "AutoTitleToggle",
    Callback = function(Value)
        autoTitle = Value
        if Value then
            Rayfield:Notify({Title = "Titles", Content = "Buying loop started", Duration = 4})
            task.spawn(function()
                local remote = game:GetService("ReplicatedStorage").Packages._Index["sleitnick_knit@1.5.1"].knit.Services.TitleService.RF.Buy
                while autoTitle do
                    pcall(function()
                        for _, t in ipairs(titleList) do
                            remote:InvokeServer(t)
                            task.wait(0.4)
                        end
                    end)
                    task.wait(120)
                end
            end)
        end
    end,
})

-- Misc Tab (your existing one – unchanged)
local MiscTab = Window:CreateTab("Misc", 4483362458)
-- ... paste your Anti-AFK, Inf Jump, Server Hop, etc. here exactly as before ...

-- Final load message
Rayfield:Notify({
    Title = "HM Hub Loaded",
    Content = "by Tha Hollows • All features ready",
    Duration = 6,
    Image = "smile"
})

print("HM Hub loaded – clean layout")
