-- Load Rayfield (working link as of 2026)
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Create the main window
local Window = Rayfield:CreateWindow({
    Name = "HM Hub",
    LoadingTitle = "LOADING HM HUB...",
    LoadingSubtitle = "By Tha Hollows",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "HMhub",
        FileName = "Config"
    },
    KeySystem = false,
})

-- Main tab
local MainTab = Window:CreateTab("Main", 4483362458)

-- Variables
local autoClick = false
local autoStat = false
local selectedStat = "Energy"  -- Default

-- =====================================
-- AUTO CLICKER
-- =====================================
local ClickToggle = MainTab:CreateToggle({
    Name = "Auto Clicker",
    CurrentValue = false,
    Flag = "AutoClickToggle",
    
    Callback = function(Value)
        autoClick = Value
        
        if Value then
            Rayfield:Notify({
                Title = "Auto Clicker",
                Content = "Clicking every ~0.03s...",
                Duration = 3
            })
            
            task.spawn(function()
                while autoClick do
                    pcall(function()
                        local clickRemote = game:GetService("ReplicatedStorage")
                            :WaitForChild("Packages")
                            :WaitForChild("_Index")
                            :WaitForChild("sleitnick_knit@1.5.1")
                            :WaitForChild("knit")
                            :WaitForChild("Services")
                            :WaitForChild("ClickService")
                            :WaitForChild("RF")
                            :WaitForChild("Click")
                        
                        clickRemote:InvokeServer()
                    end)
                    
                    task.wait(0.1)  -- Increase to 0.1 if you get kicked
                end
            end)
        end
    end,
})

-- Create Misc Tab (paste this after your MainTab or other tabs)
task.wait(1)
local MiscTab = Window:CreateTab("Misc", 4483362458)  -- Optional icon

-- Variables
local antiAFK = false
local infJump = false

-- =====================================
-- ANTI-AFK TOGGLE
-- =====================================
MiscTab:CreateToggle({
    Name = "Anti-AFK",
    CurrentValue = false,
    Flag = "AntiAFKToggle",
    Callback = function(Value)
        antiAFK = Value
        
        if Value then
            Rayfield:Notify({
                Title = "Anti-AFK",
                Content = "Tiny movement every 4 min – stay logged in forever.",
                Duration = 4
            })
            
            task.spawn(function()
                while antiAFK do
                    pcall(function()
                        local character = game.Players.LocalPlayer.Character
                        if character then
                            local hrp = character:FindFirstChild("HumanoidRootPart")
                            if hrp then
                                hrp.CFrame = hrp.CFrame * CFrame.new(0, 0, -0.1)
                                task.wait(0.05)
                                hrp.CFrame = hrp.CFrame * CFrame.new(0, 0, 0.1)
                            end
                        end
                    end)
                    task.wait(240)  -- 4 minutes
                end
            end)
        end
    end,
})

-- =====================================
-- INFINITE JUMP TOGGLE
-- =====================================
MiscTab:CreateToggle({
    Name = "Infinite Jump",
    CurrentValue = false,
    Flag = "InfJumpToggle",
    Callback = function(Value)
        infJump = Value
        
        if Value then
            Rayfield:Notify({
                Title = "Infinite Jump",
                Content = "Spam spacebar – fly like Tha Boo!",
                Duration = 4
            })
            
            local connection
            connection = game:GetService("UserInputService").JumpRequest:Connect(function()
                if infJump then
                    local character = game.Players.LocalPlayer.Character
                    if character then
                        local humanoid = character:FindFirstChildOfClass("Humanoid")
                        if humanoid then
                            humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                        end
                    end
                end
            end)
            
            -- Cleanup on disable
            task.spawn(function()
                while infJump do task.wait(1) end
                if connection then connection:Disconnect() end
            end)
        end
    end,
})

-- =====================================
-- SERVER HOP BUTTON
-- =====================================
MiscTab:CreateButton({
    Name = "Server Hop (New Server)",
    Callback = function()
        Rayfield:Notify({
            Title = "Server Hop",
            Content = "Hopping to new server...",
            Duration = 4
        })
        
        local HttpService = game:GetService("HttpService")
        local TeleportService = game:GetService("TeleportService")
        local PlaceId = game.PlaceId
        
        task.spawn(function()
            local success, result = pcall(function()
                return HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/" .. PlaceId .. "/servers/Public?sortOrder=Asc&limit=100"))
            end)
            
            if success and result and result.data then
                for _, server in ipairs(result.data) do
                    if server.playing < server.maxPlayers * 0.8 and server.id ~= game.JobId then  -- <80% full
                        TeleportService:TeleportToPlaceInstance(PlaceId, server.id)
                        return
                    end
                end
            end
            
            Rayfield:Notify({
                Title = "Server Hop",
                Content = "No good servers found – try again.",
                Duration = 5
            })
        end)
    end,
})

-- Add this anywhere after your MiscTab is created (e.g. at the bottom of the Misc tab code)
MiscTab:CreateButton({
    Name = "Destroy UI",
    Callback = function()
        Rayfield:Notify({
            Title = "Destroying UI",
            Content = "HM Hub will now be hidden. Re-execute script to reload.",
            Duration = 5
        })
        
        -- Small delay so the notification shows first
        task.wait(1)
        
        -- Destroy the entire Rayfield UI
        if Rayfield and Rayfield.Destroy then
            Rayfield:Destroy()
        elseif Window and Window.Destroy then
            Window:Destroy()
        else
            -- Fallback: manually destroy the main ScreenGui (works in most cases)
            local playerGui = game.Players.LocalPlayer:WaitForChild("PlayerGui")
            for _, gui in ipairs(playerGui:GetChildren()) do
                if gui.Name:find("Rayfield") or gui.Name:find("HM Hub") or gui.Name == "InterfaceSuite" then
                    gui:Destroy()
                end
            end
        end
        
        print("HM Hub UI destroyed")
    end,
})

-- Optional Separator Label
MiscTab:CreateLabel("Important Areas TP – Select & Click!")

-- TP Variables
local tpPositions = {
    ["Avatar Leveling"] = Vector3.new(-5464.0126953125, 10374.0771484375, -3315.83349609375),
    ["Craft"] = Vector3.new(-4873.64208984375, 10433.8935546875, -3030.97216796875),
    ["Dragon Reroll"] = Vector3.new(-5279.40966796875, 10389.3125, -3522.92724609375),
    ["Saiyan Reroll"] = Vector3.new(-4974.5849609375, 10409.408203125, -3498.215087890625),
    ["Dragon Star"] = Vector3.new(-5297.517578125, 10391.60546875, -3417.10693359375)
}
local selectedTP = "Avatar Leveling"  -- Default

-- TP Dropdown
MiscTab:CreateDropdown({
    Name = "Areas Of Intrest",
    Options = {"Avatar Leveling", "Craft", "Dragon Reroll", "Saiyan Reroll", "Dragon Star"},
    CurrentOption = {"Avatar Leveling"},
    Flag = "TPAreaFlag",
    Callback = function(Option)
        selectedTP = Option[1]
        local pos = tpPositions[selectedTP]
        Rayfield:Notify({
            Title = "TP Ready",
            Content = selectedTP .. " (" .. math.floor(pos.X) .. ", " .. math.floor(pos.Y) .. ", " .. math.floor(pos.Z) .. ")",
            Duration = 4
        })
    end,
})

-- TP Button
MiscTab:CreateButton({
    Name = "Teleport Now",
    Callback = function()
        local player = game.Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()
        local hrp = character:WaitForChild("HumanoidRootPart")
        
        local pos = tpPositions[selectedTP]
        hrp.CFrame = CFrame.new(pos + Vector3.new(0, 5, 0))  -- Slight Y offset to avoid clipping
        
        Rayfield:Notify({
            Title = "Teleported!",
            Content = "Zapped to " .. selectedTP,
            Duration = 3,
            Image = "rbxassetid://4483345998"  -- Checkmark
        })
    end,
})

-- Label at bottom
MiscTab:CreateLabel("HM HUB Misc")
