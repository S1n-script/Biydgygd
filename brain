local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Rayfield Example Window",
   Icon = 0,
   LoadingTitle = "Rayfield Interface Suite",
   LoadingSubtitle = "by Sirius",
   ShowText = "Rayfield",
   Theme = "Default",

   ToggleUIKeybind = "K",

   DisableRayfieldPrompts = false,
   DisableBuildWarnings = false,

   ConfigurationSaving = {
      Enabled = true,
      FolderName = nil,
      FileName = "Big Hub"
   },

   Discord = {
      Enabled = false,
      Invite = "noinvitelink",
      RememberJoins = true
   },

   KeySystem = false,
   KeySettings = {
      Title = "Untitled",
      Subtitle = "Key System",
      Note = "No method of obtaining the key is provided",
      FileName = "Key",
      SaveKey = true,
      GrabKeyFromSite = false,
      Key = {"Hello"}
   }
})

local Tab = Window:CreateTab("Tab Example", 4483362458) -- Title, Image

local autoThrow = false

local Toggle = Tab:CreateToggle({
   Name = "AutoThrow",
   CurrentValue = false,
   Flag = "AutoThrowToggle",
   
   Callback = function(Value)
      autoThrow = Value   -- sync with the actual toggle state (true/false)

      if Value then
         -- Run the loop in a separate thread so it doesn't freeze the game
         task.spawn(function()
            while autoThrow do
               local args = {
                  "City"
               }
               
               -- Safe remote firing with timeout + error protection
               pcall(function()
                  game:GetService("ReplicatedStorage")
                     :WaitForChild("Remotes", 8)
                     :WaitForChild("Throw", 5)
                     :FireServer(unpack(args))
               end)
               
               task.wait(0.08)   -- ≈ 12 throws/sec — adjust this:
                                 -- 0.05 = faster   /   0.15 = slower & safer
            end
         end)
      end
      -- When toggle turned OFF → autoThrow = false → loop stops automatically
   end,
})

local autoTrain = false

local TrainToggle = Tab:CreateToggle({
   Name = "Auto Train - Smart Target Detect",
   CurrentValue = false,
   Flag = "SmartAutoTrainToggle",
   
   Callback = function(Value)
      autoTrain = Value
      
      if Value then
         task.spawn(function()
            while autoTrain do
               local bestTarget = nil
               local bestScore = 0  -- We'll score targets higher = better
               
               -- CHANGE THIS PATH to where targets actually are in the game
               -- Common spots: Workspace.TrainingArea, Workspace.Targets, Workspace.Map.Targets etc.
               local targetFolder = workspace:FindFirstChild("TrainingArea") 
                                 or workspace:FindFirstChild("Targets") 
                                 or workspace  -- fallback: scan whole workspace (slow)
               
               if targetFolder then
                  for _, obj in ipairs(targetFolder:GetDescendants()) do
                     if obj:IsA("BasePart") or obj:IsA("Model") then
                        local name = obj.Name:lower()
                        
                        -- Score based on name keywords (adjust these based on what you see in-game!)
                        local score = 0
                        if name:find("targetx") or name:find("x") then score = score + 10 end
                        if name:find("advanced") or name:find("mythic") then score = score + 30 end
                        if name:find("legendary") or name:find("boss") then score = score + 50 end
                        if name:find("far") or name:find("end") then score = score + 20 end  -- farther usually better
                        
                        -- Bonus: distance from player (farther = often better in these games)
                        local playerPos = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character.PrimaryPart.Position
                        if playerPos and obj:IsA("BasePart") then
                           local dist = (obj.Position - playerPos).Magnitude
                           if dist > 100 then score = score + math.floor(dist / 50) end  -- farther = higher score
                        end
                        
                        if score > bestScore then
                           bestScore = score
                           bestTarget = obj.Name  -- We send the NAME as arg (assuming game uses target name)
                        end
                     end
                  end
               end
               
               if bestTarget then
                  pcall(function()
                     local Remotes = game:GetService("ReplicatedStorage"):WaitForChild("Remotes", 8)
                     local TrainSpear = Remotes:WaitForChild("TrainSpear", 5)
                     
                     TrainSpear:FireServer(bestTarget)  -- Fire with detected best name
                     -- print("Throwing at best target: " .. bestTarget .. " (score: " .. bestScore .. ")")
                  end)
               else
                  -- Fallback to "TargetX" if nothing found
                  pcall(function()
                     game:GetService("ReplicatedStorage").Remotes.TrainSpear:FireServer("TargetX")
                  end)
               end
               
               task.wait(0.5)  -- Check + throw every 0.5s (adjust: 0.3 faster, 1.0 stealthier)
            end
         end)
      end
   end,
})
