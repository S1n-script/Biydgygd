-- Load Rayfield (working link as of 2026)
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Create the main window
local Window = Rayfield:CreateWindow({
    Name = "HM Hub",
    LoadingTitle = "Loading HM HUB...",
    LoadingSubtitle = "by Tha Hollows",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "HMhub",
        FileName = "Config"
    },
    KeySystem = false,
})

-- Main tab
local MainTab = Window:CreateTab("Main", 4483362458)

-- Variables
local autoClick = false
local autoStat = false
local selectedStat = "Energy"  -- Default

-- =====================================
-- AUTO CLICKER
-- =====================================
local ClickToggle = MainTab:CreateToggle({
    Name = "Auto Clicker",
    CurrentValue = false,
    Flag = "AutoClickToggle",
    
    Callback = function(Value)
        autoClick = Value
        
        if Value then
            Rayfield:Notify({
                Title = "Auto Clicker",
                Content = "Clicking every ~0.03s...",
                Duration = 3
            })
            
            task.spawn(function()
                while autoClick do
                    pcall(function()
                        local clickRemote = game:GetService("ReplicatedStorage")
                            :WaitForChild("Packages")
                            :WaitForChild("_Index")
                            :WaitForChild("sleitnick_knit@1.5.1")
                            :WaitForChild("knit")
                            :WaitForChild("Services")
                            :WaitForChild("ClickService")
                            :WaitForChild("RF")
                            :WaitForChild("Click")
                        
                        clickRemote:InvokeServer()
                    end)
                    
                    task.wait(0.1)  -- Increase to 0.1 if you get kicked
                end
            end)
        end
    end,
})

-- =====================================
-- AUTO STATS (with Dropdown)
-- =====================================
-- Dropdown to choose stat
local StatDropdown = MainTab:CreateDropdown({
    Name = "Stat Select",
    Options = {"Energy", "Gems", "Luck", "Damage"},  -- Add more if needed
    CurrentOption = {"Energy"},
    Flag = "SelectedStatFlag",
    
    Callback = function(Option)
        selectedStat = Option[1]
        Rayfield:Notify({
            Title = "Stat Updated",
            Content = "Now auto-upgrading: " .. selectedStat,
            Duration = 3
        })
    end,
})

-- Toggle to start auto-upgrade
local StatToggle = MainTab:CreateToggle({
    Name = "Auto Upgrade Selected Stat",
    CurrentValue = false,
    Flag = "AutoStatToggle",
    
    Callback = function(Value)
        autoStat = Value
        
        if Value then
            if not selectedStat then
                Rayfield:Notify({Title = "Error", Content = "Pick a stat first!", Duration = 4})
                autoStat = false
                return
            end
            
            Rayfield:Notify({
                Title = "Auto Stats",
                Content = "Upgrading " .. selectedStat .. " forever...",
                Duration = 4
            })
            
            task.spawn(function()
                local remote = game:GetService("ReplicatedStorage")
                    :WaitForChild("Packages")
                    :WaitForChild("_Index")
                    :WaitForChild("sleitnick_knit@1.5.1")
                    :WaitForChild("knit")
                    :WaitForChild("Services")
                    :WaitForChild("LevelService")
                    :WaitForChild("RF")
                    :WaitForChild("PutStat")
                
                while autoStat do
                    pcall(function()
                        remote:InvokeServer(selectedStat, 1)
                    end)
                    
                    task.wait(30)  -- Safe delay – make it 0.4+ if kicked
                end
            end)
        end
    end,
})

-- Loaded notification
Rayfield:Notify({
    Title = "HM Hub Loaded!",
    Content = "Auto Clicker + Auto Stats ready. Select stat & toggle on!",
    Duration = 5,
    Image = "smile"
})

print("Tha Boo Hub loaded – no auto collect included")

local dailyReward = false

local Toggle = MainTab:CreateToggle({  -- Use 'MainTab' from your full script
    Name = "Auto Claim Daily Rewards (1-9)",
    CurrentValue = false,
    Flag = "DailyRewardToggle",
    
    Callback = function(Value)
        dailyReward = Value
        
        if Value then
            Rayfield:Notify({
                Title = "Daily Rewards",
                Content = "Auto-claiming rewards 1–9 ...",
                Duration = 4
            })
            
            task.spawn(function()
                local remote = game:GetService("ReplicatedStorage")
                    :WaitForChild("Packages")
                    :WaitForChild("_Index")
                    :WaitForChild("sleitnick_knit@1.5.1")
                    :WaitForChild("knit")
                    :WaitForChild("Services")
                    :WaitForChild("GiftService")
                    :WaitForChild("RF")
                    :WaitForChild("ClaimReward")
                
                local rewardIDs = {1, 2, 3, 4, 5, 6, 7, 8, 9}  -- All 1-9 in order
                
                while dailyReward do
                    local success, err = pcall(function()
                        for _, id in ipairs(rewardIDs) do
                            if not dailyReward then break end  -- Stop mid-cycle
                            
                            remote:InvokeServer(id)
                            task.wait(0.2)  -- Delay per reward (anti-spam)
                        end
                    end)
                    
                    if not success then
                        warn("Daily claim error: " .. tostring(err))
                    end
                    
                    task.wait(60)  -- Delay between full cycles (1-9) – prevents kick
                end
            end)
        end
    end,
})

local autoRankup = false

local Toggle = MainTab:CreateToggle({  -- Assuming you're using MainTab from your HM HUB script
    Name = "Auto Rank Up",
    CurrentValue = false,
    Flag = "AutoRankUpToggle",
    
    Callback = function(Value)
        autoRankup = Value
        
        if Value then
            Rayfield:Notify({
                Title = "Auto Rank Up",
                Content = "Attempting rank up...",
                Duration = 4
            })
            
            task.spawn(function()
                local remote = game:GetService("ReplicatedStorage")
                    :WaitForChild("Packages")
                    :WaitForChild("_Index")
                    :WaitForChild("sleitnick_knit@1.5.1")
                    :WaitForChild("knit")
                    :WaitForChild("Services")
                    :WaitForChild("RankupService")
                    :WaitForChild("RF")
                    :WaitForChild("RankUp")
                
                while autoRankup do
                    local success, err = pcall(function()
                        remote:InvokeServer()  -- No args needed in most cases
                    end)
                    
                    if not success then
                        warn("RankUp failed: " .. tostring(err))
                        -- Optional: auto-disable on repeated failure
                        -- autoRankup = false
                    end
                    
                    task.wait(60)  -- Safe delay – increase to 1 if kicked / rate-limited
                end
                
                -- Optional: notify when stopped
                Rayfield:Notify({
                    Title = "Auto Rank Up",
                    Content = "Stopped.",
                    Duration = 3
                })
            end)
        end
    end,
})

local autoQuest = false
local selectedQuestPart = "Nomek_Main_Part_1"  -- Default selected

-- Dropdown to choose which quest part to farm
local QuestDropdown = MainTab:CreateDropdown({
    Name = "Select Quest Part",
    Options = {
        "Nomek_Main_Part_1",
        "Nomek_Main_Part_2",
        "Nomek_Main_Part_3",
        "Nomek_Main_Part_4",
        "Nomek_Main_Part_5",
        "Nomek_Main_Part_6",
        "Nomek_Main_Part_7"
    },
    CurrentOption = {"Nomek_Main_Part_1"},
    MultipleOptions = false,
    Flag = "QuestPartFlag",
    
    Callback = function(Option)
        selectedQuestPart = Option[1]
        Rayfield:Notify({
            Title = "Quest Selected",
            Content = "Now targeting: " .. selectedQuestPart,
            Duration = 3
        })
    end,
})

-- Toggle to auto-accept + auto-complete the selected quest
local QuestToggle = MainTab:CreateToggle({
    Name = "Auto Accept & Complete Selected Quest",
    CurrentValue = false,
    Flag = "AutoQuestToggle",
    
    Callback = function(Value)
        autoQuest = Value
        
        if Value then
            if not selectedQuestPart then
                Rayfield:Notify({
                    Title = "Error",
                    Content = "Select a quest part first!",
                    Duration = 4
                })
                autoQuest = false
                return
            end
            
            Rayfield:Notify({
                Title = "Auto Quest",
                Content = "Accepting & completing " .. selectedQuestPart .. " endlessly...",
                Duration = 4
            })
            
            task.spawn(function()
                local questServiceRF = game:GetService("ReplicatedStorage")
                    :WaitForChild("Packages")
                    :WaitForChild("_Index")
                    :WaitForChild("sleitnick_knit@1.5.1")
                    :WaitForChild("knit")
                    :WaitForChild("Services")
                    :WaitForChild("QuestService")
                    :WaitForChild("RF")
                
                local acceptRemote = questServiceRF:WaitForChild("AcceptQuest")
                local completeRemote = questServiceRF:WaitForChild("CompleteQuest")
                
                -- Optional: If there's also a ClaimReward remote, add it here later
                -- local claimRemote = questServiceRF:WaitForChild("ClaimReward")
                
                while autoQuest do
                    local success, err = pcall(function()
                        -- Step 1: Try to accept (harmless if already accepted)
                        acceptRemote:InvokeServer(selectedQuestPart)
                        
                        -- Step 2: Complete it immediately (this is what you asked to add)
                        completeRemote:InvokeServer(selectedQuestPart)
                        
                        -- Optional Step 3: Claim if the game has a separate claim remote
                        -- claimRemote:InvokeServer(selectedQuestPart)
                    end)
                    
                    if not success then
                        warn("Quest loop error (" .. selectedQuestPart .. "): " .. tostring(err))
                    end
                    
                    task.wait(60)  -- Safe delay between full accept+complete attempts
                end
                
                Rayfield:Notify({
                    Title = "Auto Quest",
                    Content = "Stopped working on " .. selectedQuestPart,
                    Duration = 3
                })
            end)
        end
    end,
})

local autoTitle = false
local titleList = {
    "Adept", "Apprentice", "Amateur", "Trainee", "Novice",
    "Recruit", "Challanger", "Combatant", "Competitor", "Fighter",
    "Commander", "Warrior", "Elite Warrior", "Master"
}

local TitleToggle = MainTab:CreateToggle({
    Name = "Auto Buy Titles",
    CurrentValue = false,
    Flag = "AutoTitleToggle",
    
    Callback = function(Value)
        autoTitle = Value
        
        if Value then
            Rayfield:Notify({
                Title = "Auto Titles",
                Content = "Atempting To Upgrade Title...",
                Duration = 4
            })
            
            task.spawn(function()
                local remote = game:GetService("ReplicatedStorage")
                    :WaitForChild("Packages")
                    :WaitForChild("_Index")
                    :WaitForChild("sleitnick_knit@1.5.1")
                    :WaitForChild("knit")
                    :WaitForChild("Services")
                    :WaitForChild("TitleService")
                    :WaitForChild("RF")
                    :WaitForChild("Buy")
                
                while autoTitle do
                    local success, err = pcall(function()
                        for _, titleName in ipairs(titleList) do
                            if not autoTitle then break end
                            
                            remote:InvokeServer(titleName)
                            task.wait(0.4)  -- Delay per title (anti-kick / rate-limit)
                        end
                    end)
                    
                    if not success then
                        warn("Title buy error: " .. tostring(err))
                        -- Optional: break or notify on repeated fail
                    end
                    
                    task.wait(120)  -- Delay between full cycles (all titles)
                end
                
                Rayfield:Notify({
                    Title = "Auto Titles",
                    Content = "Stopped buying titles.",
                    Duration = 3
                })
            end)
        end
    end,
})

-- Create Misc Tab (paste this after your MainTab or other tabs)
local MiscTab = Window:CreateTab("Misc", 4483362458)  -- Optional icon

-- Variables
local antiAFK = false
local infJump = false
local walkSpeed = 16
local tpPosition = Vector3.new(0, 10, 0)  -- Default spawn-ish

-- =====================================
-- ANTI-AFK TOGGLE
-- =====================================
MiscTab:CreateToggle({
    Name = "Anti-AFK (Move every 4 min)",
    CurrentValue = false,
    Flag = "AntiAFKToggle",
    Callback = function(Value)
        antiAFK = Value
        
        if Value then
            Rayfield:Notify({
                Title = "Anti-AFK",
                Content = "Tiny movement every 4 min – stay logged in forever.",
                Duration = 4
            })
            
            task.spawn(function()
                while antiAFK do
                    pcall(function()
                        local character = game.Players.LocalPlayer.Character
                        if character then
                            local hrp = character:FindFirstChild("HumanoidRootPart")
                            if hrp then
                                hrp.CFrame = hrp.CFrame * CFrame.new(0, 0, -0.1)
                                task.wait(0.05)
                                hrp.CFrame = hrp.CFrame * CFrame.new(0, 0, 0.1)
                            end
                        end
                    end)
                    task.wait(240)  -- 4 minutes
                end
            end)
        end
    end,
})

-- =====================================
-- INFINITE JUMP TOGGLE
-- =====================================
MiscTab:CreateToggle({
    Name = "Infinite Jump",
    CurrentValue = false,
    Flag = "InfJumpToggle",
    Callback = function(Value)
        infJump = Value
        
        if Value then
            Rayfield:Notify({
                Title = "Infinite Jump",
                Content = "Spam spacebar – fly like Tha Boo!",
                Duration = 4
            })
            
            local connection
            connection = game:GetService("UserInputService").JumpRequest:Connect(function()
                if infJump then
                    local character = game.Players.LocalPlayer.Character
                    if character then
                        local humanoid = character:FindFirstChildOfClass("Humanoid")
                        if humanoid then
                            humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                        end
                    end
                end
            end)
            
            -- Cleanup on disable
            task.spawn(function()
                while infJump do task.wait(1) end
                if connection then connection:Disconnect() end
            end)
        end
    end,
})

-- =====================================
-- WALK SPEED SLIDER
-- =====================================
MiscTab:CreateSlider({
    Name = "Walk Speed",
    Range = {16, 250},
    Increment = 4,
    Suffix = "Speed",
    CurrentValue = 16,
    Flag = "WalkSpeedSlider",
    Callback = function(Value)
        walkSpeed = Value
        
        local function updateSpeed()
            local character = game.Players.LocalPlayer.Character
            if character then
                local humanoid = character:FindFirstChildOfClass("Humanoid")
                if humanoid then humanoid.WalkSpeed = Value end
            end
        end
        updateSpeed()
        
        -- Respawn persistence
        game.Players.LocalPlayer.CharacterAdded:Connect(function(char)
            char:WaitForChild("Humanoid").WalkSpeed = walkSpeed
        end)
        
        Rayfield:Notify({
            Title = "Speed Updated",
            Content = "Now " .. Value .. " speed (Marksville zoomies!)",
            Duration = 3
        })
    end,
})

-- =====================================
-- SERVER HOP BUTTON
-- =====================================
MiscTab:CreateButton({
    Name = "Server Hop (New Server)",
    Callback = function()
        Rayfield:Notify({
            Title = "Server Hop",
            Content = "Hopping to new server...",
            Duration = 4
        })
        
        local HttpService = game:GetService("HttpService")
        local TeleportService = game:GetService("TeleportService")
        local PlaceId = game.PlaceId
        
        task.spawn(function()
            local success, result = pcall(function()
                return HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/" .. PlaceId .. "/servers/Public?sortOrder=Asc&limit=100"))
            end)
            
            if success and result and result.data then
                for _, server in ipairs(result.data) do
                    if server.playing < server.maxPlayers * 0.8 and server.id ~= game.JobId then  -- <80% full
                        TeleportService:TeleportToPlaceInstance(PlaceId, server.id)
                        return
                    end
                end
            end
            
            Rayfield:Notify({
                Title = "Server Hop",
                Content = "No good servers found – try again.",
                Duration = 5
            })
        end)
    end,
})

-- =====================================
-- FPS BOOST BUTTON (One-time click)
-- =====================================
MiscTab:CreateButton({
    Name = "FPS Boost (Optimize Graphics)",
    Callback = function()
        Rayfield:Notify({
            Title = "FPS Boost",
            Content = "Optimizing... Run once per session.",
            Duration = 4
        })
        
        -- Lighting tweaks
        local Lighting = game:GetService("Lighting")
        Lighting.GlobalShadows = false
        Lighting.FogEnd = 9e9
        Lighting.Brightness = 2
        
        -- Disable effects
        for _, v in pairs(game:GetDescendants()) do
            if v:IsA("Explosion") then v:Destroy() end
            if v:IsA("Fire") or v:IsA("Sparkles") or v:IsA("Smoke") then v:Destroy() end
            if v:IsA("PointLight") or v:IsA("SpotLight") or v:IsA("SurfaceLight") then v.Enabled = false end
        end
        
        -- Workspace tweaks
        local Workspace = game:GetService("Workspace")
        Workspace.StreamingEnabled = true  -- If available
        settings().Rendering.QualityLevel = Enum.SavedQualitySetting.Automatic  -- Low
        
        -- Ongoing cleanup
        game.DescendantAdded:Connect(function(obj)
            if obj:IsA("Explosion") or obj:IsA("Fire") or obj:IsA("Sparkles") or obj:IsA("Smoke") then
                obj:Destroy()
            end
        end)
        
        Rayfield:Notify({
            Title = "FPS Boost",
            Content = "Complete! Check FPS (should be 60+ now).",
            Duration = 5
        })
    end,
})

-- =====================================
-- TP TO POPULAR AREAS (Dropdown + Button)
-- =====================================
local TPPresetDropdown = MiscTab:CreateDropdown({
    Name = "TP Preset",
    Options = {"Spawn", "Shop", "Quest Area", "Rebirth NPC", "Pet Dealer"},  -- UPDATE THESE
    CurrentOption = {"Spawn"},
    Flag = "TPPresetFlag",
    Callback = function(Option)
        local presets = {
            ["Spawn"] = Vector3.new(0, 10, 0),
            ["Shop"] = Vector3.new(100, 10, 100),      -- UPDATE via Dex: workspace.Shop.Position
            ["Quest Area"] = Vector3.new(-200, 10, 0), -- UPDATE
            ["Rebirth NPC"] = Vector3.new(0, 10, -150),-- UPDATE
            ["Pet Dealer"] = Vector3.new(150, 10, 50)  -- UPDATE
        }
        tpPosition = presets[Option[1]] or Vector3.new(0, 10, 0)
        Rayfield:Notify({
            Title = "TP Ready",
            Content = "Target: " .. Option[1] .. " (" .. tostring(tpPosition) .. ")",
            Duration = 3
        })
    end,
})

MiscTab:CreateButton({
    Name = "Teleport to Preset",
    Callback = function()
        local character = game.Players.LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            character.HumanoidRootPart.CFrame = CFrame.new(tpPosition)
            Rayfield:Notify({
                Title = "Teleported!",
                Content = "Zapped to " .. tostring(tpPosition),
                Duration = 3
            })
        else
            Rayfield:Notify({
                Title = "TP Failed",
                Content = "Respawn first!",
                Duration = 4
            })
        end
    end,
})

-- Label at bottom
MiscTab:CreateLabel("HM HUB Misc")
