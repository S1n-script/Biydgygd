local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Rayfield Example Window",
   Icon = 0,
   LoadingTitle = "Rayfield Interface Suite",
   LoadingSubtitle = "by Sirius",
   ShowText = "Rayfield",
   Theme = "Default",

   ToggleUIKeybind = "K",

   DisableRayfieldPrompts = false,
   DisableBuildWarnings = false,

   ConfigurationSaving = {
      Enabled = true,
      FolderName = nil,
      FileName = "Big Hub"
   },

   Discord = {
      Enabled = false,
      Invite = "noinvitelink",
      RememberJoins = true
   },

   KeySystem = false,
   KeySettings = {
      Title = "Untitled",
      Subtitle = "Key System",
      Note = "No method of obtaining the key is provided",
      FileName = "Key",
      SaveKey = true,
      GrabKeyFromSite = false,
      Key = {"Hello"}
   }
})

local Tab = Window:CreateTab("Tab Example", 4483362458) -- Title, Image

local autoThrow = false

local Toggle = Tab:CreateToggle({
   Name = "AutoThrow",
   CurrentValue = false,
   Flag = "AutoThrowToggle",
   
   Callback = function(Value)
      autoThrow = Value   -- sync with the actual toggle state (true/false)

      if Value then
         -- Run the loop in a separate thread so it doesn't freeze the game
         task.spawn(function()
            while autoThrow do
               local args = {
                  "City"
               }
               
               -- Safe remote firing with timeout + error protection
               pcall(function()
                  game:GetService("ReplicatedStorage")
                     :WaitForChild("Remotes", 8)
                     :WaitForChild("Throw", 5)
                     :FireServer(unpack(args))
               end)
               
               task.wait(0.08)   -- ≈ 12 throws/sec — adjust this:
                                 -- 0.05 = faster   /   0.15 = slower & safer
            end
         end)
      end
      -- When toggle turned OFF → autoThrow = false → loop stops automatically
   end,
})

-- Add this after your Tab is created

local selectedTarget = "RedCore"  -- Default

-- Cache remote for speed/safety
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TrainRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("TrainSpear")

local Dropdown = Tab:CreateDropdown({
   Name = "Select Target & Burst Train",
   Options = {
      "RedCore", "TargetX", "Bullseye Elite", "CircleCraft", 
      "PrimeTarget", "RedLine Series", "HaloMark", 
      "BullAura", "PointForce", "AimFusion"
   },
   CurrentOption = {"RedCore"},
   MultipleOptions = false,
   Flag = "TrainTargetDropdown",
   
   Callback = function(Options)
      selectedTarget = Options[1]  -- Single selection (table[1])
      
      -- Instant burst train on selected (30x super-fast)
      task.spawn(function()
         local successCount = 0
         for i = 1, 30 do
            if pcall(function()
               TrainRemote:FireServer(selectedTarget)  -- Direct arg (no unpack needed)
            end) then
               successCount += 1
            end
            task.wait(0.035)  -- ~28/sec — fast but safe
         end
         
         Rayfield:Notify({
            Title = "Burst Complete",
            Content = "Fired " .. successCount .. "/30 on " .. selectedTarget,
            Duration = 4,
            Image = successCount > 0 and "check-circle" or "alert-triangle"
         })
      end)
   end,
})

-- Bonus: Auto Train Toggle (uses dropdown selection)
local autoTrain = false

local TrainToggle = Tab:CreateToggle({
   Name = "Auto Train (Selected Target)",
   CurrentValue = false,
   Flag = "AutoTrainToggle",
   
   Callback = function(Value)
      autoTrain = Value
      
      if Value then
         task.spawn(function()
            while autoTrain do
               pcall(function()
                  TrainRemote:FireServer(selectedTarget)
               end)
               task.wait(0.45)  -- Balanced speed (~2/sec)
            end
         end)
      end
   end,
})
